<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Hand Tracking and Object Interaction</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/handy-work/build/handy-controls.min.js"></script>
</head>

<body>
    <a-scene>
        <a-entity id="cameraRig" position="0 1.6 0">
            <a-entity camera look-controls>
                <a-entity handy-controls="right:#right-gltf;materialOverride:right;"
                    material="color:gold;metalness:1;roughness:0;">

                    <!-- Screen space inputs like mobile AR -->
                    <a-torus radius="0.008" radius-tubular="0.001" material="shader:flat;color:blue"
                        data-none="screen-0"></a-torus>
                    <a-torus radius="0.008" radius-tubular="0.001" material="shader:flat;color:green"
                        data-none="screen-1"></a-torus>
                    <a-torus radius="0.008" radius-tubular="0.001" material="shader:flat;color:red"
                        data-none="screen-2"></a-torus>

                    <!-- Objects attached to tracked hand joints -->
                    <a-gltf-model src="#watch-gltf" data-left="wrist" position="-1000 0 0">
                        <a-sphere radius="0.02" position="0 0.02 0"
                            sphere-collider="radius:0.02;objects:[data-right$=-tip];" exit-on="hitend"
                            visible="false"></a-sphere>
                    </a-gltf-model>
                    <a-entity data-left="ring-finger-phalanx-proximal">
                        <a-torus position="0 0 -0.03" radius="0.008" radius-tubular="0.001" scale="1 1 1.5"
                            material="color:gold;metalness:1;roughness:0;"></a-torus>
                    </a-entity>

                    <a-entity data-right="index-finger-tip" mixin="blink"
                        blink-controls="rotateOnTeleport:false;startEvents:pose_point_fuseShort;endEvents:pose_point_fuseLong;"></a-entity>
                    <a-entity data-left="index-finger-tip" mixin="blink"
                        blink-controls="rotateOnTeleport:false;startEvents:pose_point_fuseShort;endEvents:pose_point_fuseLong;"></a-entity>

                    <!-- Ray and Grip are Available on Hands or Tracked Inputs -->
                    <a-entity data-right="ray" mixin="blink" blink-controls>
                        <a-entity position="0 0 -0.22" class="pose-label"
                            text="value: Hello World; align: center;"></a-entity>
                    </a-entity>
                    <a-entity data-left="ray" mixin="blink" blink-controls>
                        <a-entity position="0 0 -0.22" class="pose-label"
                            text="value: Hello World; align: center;"></a-entity>
                    </a-entity>

                    <!-- These act like anchors pulling both hands and controllers towards grabable objects, moving the whole hand and the attached elements-->
                    <a-entity id="right-magnet" data-right="grip"
                        data-magnet=".magnet-right:not([data-no-magnet]),.magnet:not([data-no-magnet])"
                        grab-magnet-target="startEvents:squeezestart,pose_fist;stopEvents:pose_flat_fuseShort,squeezeend;"></a-entity>
                    <a-entity id="left-magnet" data-left="grip"
                        data-magnet=".magnet-left:not([data-no-magnet]),.magnet:not([data-no-magnet])"
                        grab-magnet-target="startEvents:squeezestart,pose_fist;stopEvents:pose_flat_fuseShort,squeezeend;"></a-entity>

                    <!-- Markers to let us know the real location of the hands -->
                    <a-sphere id="right-no-magnet" data-right="grip" data-no-magnet radius="0.01"
                        color="red"></a-sphere>
                    <a-sphere id="left-no-magnet" data-left="grip" data-no-magnet radius="0.01" color="red"></a-sphere>

                    <!-- Invisible objects at the tips of each finger for physics or intersections -->
                    <a-sphere data-right="index-finger-tip" radius="0.01" visible="false"></a-sphere>
                    <a-sphere data-right="middle-finger-tip" radius="0.01" visible="false"></a-sphere>
                    <a-sphere data-right="ring-finger-tip" radius="0.01" visible="false"></a-sphere>
                    <a-sphere data-right="pinky-finger-tip" radius="0.01" visible="false"></a-sphere>
                    <a-sphere data-right="thumb-tip" radius="0.01" visible="false"></a-sphere>
                    <a-sphere data-left="index-finger-tip" radius="0.01" visible="false"></a-sphere>
                    <a-sphere data-left="middle-finger-tip" radius="0.01" visible="false"></a-sphere>
                    <a-sphere data-left="ring-finger-tip" radius="0.01" visible="false"></a-sphere>
                    <a-sphere data-left="pinky-finger-tip" radius="0.01" visible="false"></a-sphere>
                    <a-sphere data-left="thumb-tip" radius="0.01" visible="false"></a-sphere>
                </a-entity>
            </a-entity>
        </a-entity>
        <!-- <a-box id="interactableObject" position="0 1.6 -1" color="red" grabbable></a-box> -->

    </a-scene>
</body>

</html>